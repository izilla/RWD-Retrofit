/*
 * RWD Retrofit v1.5
 * Allows an existing "desktop site" to co-exist with a "responsive site", while also able to serve the desktop site to a different breakpoint on "mobile" - useful for serving the desktop site to tablets, for example
 *
 * Returns an object containing the desktop (rwdRetrofit.desktop) and optional mobile (rwdRetrofit.mobile) media queries as strings for responding to media queries with JS; for example, by using enquire.js (http://wickynilliams.github.com/enquire.js)
 *
 * Copyright (c) 2012 Izilla Partners Pty Ltd
 *
 * http://www.izilla.com.au
 *
 * Licensed under the MIT license
 */
;var rwdRetrofit=(function(){if(!document.querySelector||!document.getElementsByClassName||typeof(document.documentElement.clientWidth)=="undefined"){return}var j=document.querySelector('meta[name="viewport"]'),r=document.getElementsByClassName("rwdretrofit-desktop"),b=document.getElementsByClassName("rwdretrofit-mobile");if(!j||r.length===0||b.length===0){return}var f="ontouchstart" in window||"onmsgesturechange" in window,m="content",e="media",d=j&&j.getAttribute(m),g="width=980",a=250,c="onorientationchange" in window,l=c?"orientationchange":"resize",p=r[0].getAttribute(e),s=b[0].getAttribute(e),k=r[0].getAttribute("data-breakpoint-width"),q,n=r[0].getAttribute("data-viewport-width"),t={};if(f){if(k){q=k}else{q=p.replace(/.*?min-width:\s?(\d*).*/g,"$1")}if(n&&parseInt(n)>=parseInt(q)){g=g.replace(/\d+/,n)}else{if(q>980){g=g.replace(/\d+/,q)}}}else{q=p.replace(/.*?min-width:\s?(\d*).*/g,"$1")}p=p.replace(/(min-width:\s?)\d*/g,"$1"+q);s=s.replace(/(max-width:\s?)\d*/g,"$1"+(q-1));t.desktop=p,t.mobile=s;if(f){for(var o=0;o<r.length;o++){r[o].setAttribute(e,p)}for(var o=0;o<b.length;o++){b[o].setAttribute(e,s)}function h(){j.setAttribute(m,d);window.setTimeout(function(){if(document.documentElement.clientWidth>=q){j.setAttribute(m,g)}},a)}h();window.addEventListener(l,h,false)}return t})();